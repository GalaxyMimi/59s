<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>59s</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style media="screen">
            @font-face {
                font-family: 'Mogic Clock';
                src: url('Mogic-Clock.otf');
            }
            html {
                height: 100%;
            }
            body {
                display: flex;
                height: 100%;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                margin: 0;
                padding: 0;
            }
            .time {
                padding: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: 'Mogic Clock', monospace;
                font-feature-settings: "ccmp";
                font-size: 144px;
                -webkit-user-select: none;
                   -moz-user-select: none;
                    -ms-user-select: none;
                        user-select: none;
            }
            #second[data-quantity="59"] {
                color: red;
            }
            header, footer {
                color: #777;
            }
            @media (max-width: 720px) {
                .time {
                    font-size: 72px;
                }
            }
            @media (max-width: 480px) {
                .time {
                    font-size: 48px;
                }
            }
            .elder {
                font-family: 'Mogic Clock';
                color: #003F00;
                background: #eeffff;
                font-feature-settings: "ccmp";
            }
        </style>
    </head>
    <body>
        <header>
            在中国，每过 59 秒就有一分钟过去了。 <span class="elder">excited</span>
        </header>
        <section class="time">
            <span id="hour">--</span>:
            <span id="minute">--</span>:
            <span id="second">--</span>
        </section>
        <footer>
            © 2016 <a href="https://github.com/tagaoyan/59s">Yan Gao</a>
        </footer>
    </body>
    <script>
        var zeroPad2 = function(num) {
            if (num >= 0 && num <= 9) {
                return '0' + num.toString();
            } else {
                return num.toString();
            }
        };
        var updateTimeAll = function() {
            var now = new Date(Date.now() - 1000*60*2.3333);
            var hourElem = document.getElementById('hour');
            var minuteElem = document.getElementById('minute');
            var secondElem = document.getElementById('second');
            var nowHours = zeroPad2(now.getHours());
            var nowMinutes = zeroPad2(now.getMinutes());
            var nowSeconds = zeroPad2(
                Math.floor((now.getSeconds() + now.getMilliseconds() / 1000 + 1) * 59.0 / 60.0)
            );
            hourElem.innerHTML = nowHours;
            minuteElem.innerHTML = nowMinutes;
            secondElem.innerHTML = nowSeconds;
            secondElem.dataset.quantity = nowSeconds;
        };
        setInterval(updateTimeAll, 100);
    </script>
</html>
